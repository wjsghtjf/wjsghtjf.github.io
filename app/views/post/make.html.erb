<!DOCTYPE html>

<!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
  <div class="container">
    <a class="navbar-brand" href="#">Start Bootstrap</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item active">
          <a class="nav-link" href="#">Home
            <span class="sr-only">(current)</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">About</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Services</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Contact</a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<!-- Page Content -->
<div class="container">

  <div class="row">

    <div class="col-lg-3">
      <h1 class="my-4">방탈출 만들기</h1>
      <div class="list-group">
        <a href="#" class="list-group-item active">Stage 1</a>
        <a href="#" class="list-group-item">Stage 2</a>
        <a href="#" class="list-group-item">Stage 3</a>
        <a href="#" class="list-group-item">Stage 4</a>
        <a href="#" class="list-group-item">Add Stage</a>
      </div>
    </div>
    <!-- /.col-lg-3 -->

    <div class="col-lg-9">

      <div class="card card-outline-secondary my-4">
        <div class="card-header">
        </div>
        <div class="card-body">
            <div class="container">
              <h2>Stage 1</h2>
              <p>사진 및 동영상, 텍스트를 입력하세요.</p>
              <div class="row">
                <div>
                  <form class="form-horizontal">
                    <div class="form-group">
                      <label for="exampleInputName">스테이지 제목</label>
                      <input type="text" class="form-control" id="exampleInputName2" placeholder="Melody">
                    </div>
                    <div class="form-group ">
                      <label for="exampleInputText">문제</label>
                     <textarea  class="form-control" placeholder="내용을 입력하세요."></textarea> 
                    </div>
                    <div class="form-group">
                      <label for="exampleInputHine">힌트</label>
                      <input type="text" class="form-control" id="exampleInputEmail2" placeholder="5번 실패시 힌트가 등장합니다.">
                    </div>
                   

                    <div>
                        <div class="form-group">
                            <label>Upload Image</label>
                            <div class="input-group">
                                <span class="input-group-btn">
                                    <span class="btn btn-default btn-file">
                                        Browse… <input type="file" id="imgInp">
                                    </span>
                                </span>
                                <input type="text" class="form-inline" readonly>
                                <button type="button" id="btn_cancel" onClick="cancelImage()" class="btn btn-danger" >X</button>
                                
                            </div>
                            <button type="button" id="btn_preview"  onClick="showImage()" class="btn btn-outline-primary">미리보기</button>
                            <img id='img-upload'/>
                        </div>
                    </div>
                      <!-- /.card -->
                 <button type="submit" class="btn btn-default">저장</button>
                  </form>
                </div>
              </div>
            </div>
      
          <hr>
        </div>
      </div>
      <!-- /.card -->

    </div>
    <!-- /.col-lg-9 -->

  </div>

</div>
<!-- /.container -->

<!-- Footer -->
<footer class="py-5 bg-dark">
  <div class="container">
    <p class="m-0 text-center text-white">Copyright &copy; 멋쟁이처럼 탈출하기 2018</p>
  </div>
  <!-- /.container -->
</footer>

<script>

		
		var imgInput;
$(document).ready( function() {
  
    	$(document).on('change', '.btn-file :file', function() {
    var input = $(this),
		label = input.val().replace(/\\/g, '/').replace(/.*\//, '');
		input.trigger('fileselect', [label]);
		});

		$('.btn-file :file').on('fileselect', function(event, label) {
		    var input = $(this).parents('.input-group').find(':text'), log = label;
		    
		    if( input.length ) {
		      if(log.length)
		        input.val(log);
		      
		    } else {
		        if( log ) alert(log);
		        
		    }
	    
		});
		

		$("#imgInp").change(function(){
		    if (this.files && this.files[0]) {
		      imgInput = this;
		      $("#btn_cancel").css("display","inline");
		      $("#btn_preview").css("display","block");
		    }
		});
		
	});
	
	function showImage(){
	  if(imgInput)  readURL(imgInput);
	 $("#btn_preview").css("display","none")
		    
	}
	
		function cancelImage(){
	    imgInput=null;
	    $('.btn-file :file').parents('.input-group').find(':text').val("");
	    $("#imgInp").val('');
	    
		  $("#btn_preview").css("display","none");
	    $("#btn_cancel").css("display","none");
	    $('#img-upload').attr("src","");
		  
		}
		
	function readURL(input) {
		    if (input.files && input.files[0]) {
		        var reader = new FileReader();
		        
		        reader.onload = function (e) {
		            $('#img-upload').attr('src', e.target.result);
		        }
		        
		        reader.readAsDataURL(input.files[0]);
		    }
		    
		}
</script>